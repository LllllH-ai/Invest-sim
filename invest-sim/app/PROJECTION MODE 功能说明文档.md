# PROJECTION MODE 功能说明文档

## 📋 目录

1. [模式概述](#模式概述)
2. [与BACKTEST的关系](#与backtest的关系)
3. [快速开始](#快速开始)
4. [输入建模详解](#输入建模详解)
5. [模拟参数配置](#模拟参数配置)
6. [结果分析](#结果分析)
7. [高级功能](#高级功能)
8. [常见问题](#常见问题)

---

## 模式概述

### 什么是 PROJECTION MODE？

**PROJECTION MODE（蒙特卡洛预测模式）** 是投资组合管理系统的前瞻性预测功能，用于基于输入建模（Input Modeling）模拟未来价格走向，评估投资策略在未来市场环境下的表现。

### 核心目的

1. **未来价格模拟**：使用输入建模的分布模型生成未来收益率，模拟标的物价格走向
2. **策略表现评估**：基于模拟的价格路径，评估选定策略在未来的表现
3. **风险量化**：计算VaR、CVaR等风险指标，量化未来风险
4. **概率分析**：给出不同结果的概率，帮助制定投资决策

### 核心优势

| 优势 | 说明 |
|-----|------|
| ✅ **基于历史数据** | 使用回测中得到的输入模型，更贴近真实市场特征 |
| ✅ **蒙特卡洛模拟** | 生成数千条模拟路径，全面评估可能的结果 |
| ✅ **概率预测** | 提供不同结果的概率分布，而非单一预测 |
| ✅ **风险量化** | 计算VaR、CVaR等风险指标，明确风险敞口 |

### 核心技术：蒙特卡洛模拟

**什么是蒙特卡洛模拟？**

蒙特卡洛模拟是一种基于概率统计的预测方法：
- 📊 从历史数据中提取分布特征（输入建模）
- 🎲 使用这个分布随机生成大量未来场景
- 📈 评估每个场景下的投资表现
- 📉 统计分析所有场景的结果

**为什么使用蒙特卡洛？**
- 未来充满不确定性，单一预测不可靠
- 需要评估大量可能的市场情景
- 提供概率分布而非单一答案
- 量化风险和机会

---

## 与BACKTEST的关系

### 完整工作流程

**PROJECTION MODE 是 BACKTEST MODE 的延续，两者形成完整的分析链条：**

```mermaid
graph LR
    A[上传历史数据] --> B[BACKTEST回测]
    B --> C[输入建模]
    C --> D[PROJECTION预测]
    D --> E[策略评估]
    E --> F{满意? }
    F -->|否| B
    F -->|是| G[执行投资]
```

#### 第一步：BACKTEST（回测）

**输入：** 历史标的物价格数据（CSV格式）

**处理：**
1. 选择策略并配置参数
2. 运行回测，评估历史表现
3. 系统自动进行输入建模（Input Modeling）
4. 分析历史收益率分布特征
5. 拟合最佳分布模型

**输出：**
- 策略历史表现指标
- 输入模型（分布类型 + 参数）
- 优化的策略参数

#### 第二步：PROJECTION（预测）

**输入：** 回测阶段得到的输入模型

**处理：**
1. 系统自动应用回测中选择的策略
2. 使用输入模型生成未来收益率
3. 模拟未来价格走向（N条路径）
4. 评估策略在每条路径下的表现
5. 统计分析所有路径的结果

**输出：**
- 未来表现的概率分布
- 风险指标（VaR、CVaR等）
- 不同情景分析
- 目标达成概率

---

### 完整流程对比表

| 阶段 | BACKTEST MODE | PROJECTION MODE |
|-----|--------------|----------------|
| **时间维度** | 分析过去 | 预测未来 |
| **数据来源** | 历史价格数据 | 输入模型参数 |
| **核心任务** | 评估策略历史表现 | 评估策略未来表现 |
| **输入建模** | 生成输入模型 | 使用输入模型 |
| **结果类型** | 确定的历史结果 | 概率分布 |
| **关键指标** | Sharpe、最大回撤、波动率 | VaR、CVaR、成功概率 |
| **用途** | 策略验证、参数优化 | 风险评估、目标设定 |

---

### 为什么需要先回测？

#### 核心原因：获得准确的输入模型

| 如果先回测 | 如果跳过回测 |
|----------|------------|
| ✅ 输入模型基于真实历史数据 | ⚠️ 使用默认参数或假设 |
| ✅ 分布特征准确（均值、波动率、偏度） | ⚠️ 可能不符合实际市场特征 |
| ✅ 策略参数已优化 | ⚠️ 使用默认参数 |
| ✅ 预测结果更可靠 | ⚠️ 预测准确性较低 |
| ✅ 完整的分析链条 | ⚠️ 缺乏历史验证 |

#### 其他好处

1. **策略验证**：通过历史数据验证策略的有效性
2. **参数优化**：找到最优的策略参数配置
3. **风险评估**：了解策略的历史风险特征
4. **信心提升**：历史表现好，对未来预测更有信心

---

### 可以不回测直接预测吗？

**答案：可以，但强烈不建议。**

#### 跳过回测的后果

| 影响 | 说明 |
|-----|------|
| ⚠️ **准确性下降** | 输入模型使用默认参数，可能不准确 |
| ⚠️ **缺乏验证** | 策略未经历史验证，可靠性未知 |
| ⚠️ **参数不优** | 使用默认参数，非最优配置 |
| ⚠️ **风险未知** | 无法评估策略的历史风险特征 |

#### 什么情况下可以考虑跳过回测

- 📊 只做快速测试，不用于实际决策
- 🔄 已经完成过回测，只想调整预测参数
- 💡 没有历史数据，只想体验功能

**但即使这些情况，也建议尽可能先完成回测。**

---

### 工作流程最佳实践

```
1️⃣ 准备历史数据
   ↓ （至少1年，建议2-3年）
2️⃣ 运行BACKTEST
   ↓ （完成输入建模）
3️⃣ 分析回测结果
   ↓ （验证策略有效性）
4️⃣ 优化策略参数
   ↓ （如有需要）
5️⃣ 运行PROJECTION
   ↓ （自动应用输入模型）
6️⃣ 分析预测结果
   ↓ （评估未来表现）
7️⃣ 制定投资计划
   ↓ （基于预测结果）
8️⃣ 定期更新
   （新增数据，重新回测和预测）
```

---

## 快速开始

### 操作步骤概览

系统提供了清晰的5步操作指引：

```
1️⃣ 步骤 1：选择策略
   - 在左侧边栏选择投资策略
   - 建议使用回测中的策略（系统会自动应用）

2️⃣ 步骤 2：配置参数
   - 设置初始资金、杠杆等
   - 会自动使用回测参数

3️⃣ 步骤 3：设置模拟
   - 配置预测年限（1-50年）
   - 设置模拟次数（100-5000次）
   - 选择收益分布模型（Normal/Student-t/Bootstrap）
   - 设置年度追加投资（可选）

4️⃣ 步骤 4：运行模拟
   - 点击"🚀 RUN SIMULATION"按钮

5️⃣ 步骤 5：查看结果
   - 在6个标签页中查看详细预测结果
```

---

### 首次使用建议

#### 推荐流程（完整版）

**前置步骤：**
1. ✅ **准备历史数据**：CSV格式，至少1年数据
2. ✅ **完成BACKTEST**：运行回测，完成输入建模
3. ✅ **验证回测结果**：确认策略表现符合预期

**预测步骤：**
1. ✅ **切换到PROJECTION模式**：系统自动应用回测策略和输入模型
2. ✅ **设置预测参数**：
   - 预测年限：5-10年（推荐）
   - 模拟次数：1000次（推荐）
   - 使用输入建模推荐的分布
3. ✅ **运行模拟**：点击"RUN SIMULATION"
4. ✅ **分析结果**：查看6个标签页的详细分析

---

#### 快速体验（简化版）

如果只是想快速体验功能：

**选项A：使用示例数据**
```
1️⃣ 在BACKTEST中使用示例数据运行回测
2️⃣ 完成输入建模
3️⃣ 切换到PROJECTION，保持默认参数
4️⃣ 运行模拟
```

**选项B：跳过回测（不推荐）**
```
1️⃣ 直接进入PROJECTION模式
2️⃣ 系统会提示未完成输入建模
3️⃣ 选择Normal分布，使用默认参数
4️⃣ 运行模拟（结果准确性较低）
```

---

### 配置状态检查

系统会实时显示配置状态：

#### 已完成回测

```
✅ 已应用回测结果：
- 策略：Momentum（来自回测）
- Input Model：Bootstrap 分布（基于历史标的物价格数据拟合）
- 参数：已自动应用回测参数
- 用途：使用此Input Model模拟未来价格走向，评估策略在未来表现

💡 建议：保持这些设置以获得最准确的预测结果
```

#### 未完成回测

```
⚠️ 未检测到输入建模结果：
- 建议先在「BACKTEST MODE」中运行回测
- 或在「输入建模」功能中分析历史数据
- 当前将使用默认参数（准确性较低）

🔧 快速操作：
1. 点击"输入建模"按钮
2. 上传历史数据或使用示例数据
3. 完成输入建模
4. 返回PROJECTION继续配置
```

---

## 输入建模详解

### 什么是输入建模（Input Modeling）？

**输入建模是Monte Carlo模拟的核心**，它基于**历史标的物价格数据**，分析收益率的分布特征，然后使用这个分布模型来**模拟未来价格走向**。

#### 核心概念

```mermaid
graph LR
    A[历史价格数据] --> B[计算收益率]
    B --> C[分析分布特征]
    C --> D[拟合分布模型]
    D --> E[验证拟合效果]
    E --> F[选择最佳模型]
    F --> G[保存模型参数]
    G --> H[用于未来模拟]
```

---

### 工作流程详解

#### 步骤 1：数据提取

**输入：** 历史标的物价格数据
```csv
date,SPY,AGG,GLD
2020-01-01,320.5,115.2,1550. 8
2020-01-02,322.1,115.5,1548.3
2020-01-03,318.9,115.8,1552.1
```

**处理：** 计算日收益率
```
收益率 = (今日价格 - 昨日价格) / 昨日价格
```

**输出：** 收益率序列
```
SPY:  [0.005, -0.010, 0.008, ...]
AGG: [0.003, 0.002, -0.001, ...]
GLD: [-0.002, 0.003, 0.001, ...]
```

---

#### 步骤 2：特征分析

**计算统计特征：**

| 特征 | 含义 | 用途 |
|-----|------|------|
| **均值（Mean）** | 平均收益率 | 反映收益趋势 |
| **标准差（Std Dev）** | 波动程度 | 衡量风险 |
| **偏度（Skewness）** | 分布对称性 | 识别偏态 |
| **峰度（Kurtosis）** | 尾部厚度 | 评估极端事件 |

**示例输出：**
```
资产: SPY
- 日均值: 0.05%
- 年化收益: 12. 6% (0.05% × 252)
- 日标准差: 1.2%
- 年化波动: 19.1% (1.2% × √252)
- 偏度: -0.3 (轻微左偏)
- 峰度: 4.2 (轻微尖峰)
```

---

#### 步骤 3：分布拟合

**支持的分布模型：**

| 序号 | 分布名称 | 参数 | 适用场景 |
|-----|---------|------|---------|
| 1 | Normal | μ, σ | 市场波动稳定 |
| 2 | Student-t | μ, σ, df | 存在极端事件 |
| 3 | Lognormal | μ, σ | 价格数据 |
| 4 | Gamma | α, β | 正偏态数据 |
| 5 | Beta | α, β | 有界数据 |
| 6 | Weibull | λ, k | 生存分析 |
| 7 | Gumbel | μ, β | 极值分布 |
| 8 | Laplace | μ, b | 双指数分布 |
| 9 | Cauchy | x₀, γ | 极厚尾分布 |
| 10 | Bootstrap | - | 非参数方法 |

**拟合过程：**
1. 对每个分布模型进行参数估计
2. 计算拟合优度指标
3. 对比各模型的拟合效果
4. 推荐最佳模型

---

#### 步骤 4：拟合评估

**拟合优度指标：**

##### KS统计量（Kolmogorov-Smirnov）

**含义：** 理论分布与实际数据的最大差异

**公式：** `KS = max|F(x) - F̂(x)|`

**解读：**
- 值越小越好
- <0.05：拟合优秀
- 0.05-0.10：拟合良好
- >0.10：拟合较差

##### AIC（赤池信息准则）

**含义：** 平衡拟合效果和模型复杂度

**公式：** `AIC = 2k - 2ln(L)`
- k：参数个数
- L：似然函数

**解读：**
- 值越小越好
- 惩罚过度复杂的模型
- 用于对比不同模型

##### BIC（贝叶斯信息准则）

**含义：** 类似AIC，但更惩罚复杂模型

**公式：** `BIC = k·ln(n) - 2ln(L)`
- n：样本数量

**解读：**
- 值越小越好
- 对参数数量更敏感
- 倾向选择更简单的模型

---

#### 步骤 5：模型选择

**自动推荐逻辑：**

```
1. 计算所有成功拟合分布的综合得分
2. 综合得分 = 归一化KS + 归一化AIC + 归一化BIC
3. 选择综合得分最低的分布
4. 显示拟合参数和评估指标
```

**示例输出：**
```
✅ 推荐分布：Bootstrap
- KS统计量：0.032（优秀）
- AIC：-1234. 5
- BIC：-1220.3
- 说明：完全基于历史数据，保留所有分布特征
```

---

### 为什么输入建模重要？

#### 影响预测准确性

| 输入模型质量 | 预测结果 |
|-----------|---------|
| ✅ 基于真实历史数据 | 准确，可靠 |
| ⚠️ 使用默认参数 | 不准确，仅供参考 |
| ⚠️ 错误的分布选择 | 误导性结果 |

#### 影响风险评估

| 分布特征 | 风险影响 |
|---------|---------|
| **厚尾（高峰度）** | VaR/CVaR更大，极端损失概率更高 |
| **左偏（负偏度）** | 下行风险更大 |
| **高波动** | 结果分散，不确定性高 |

#### 影响策略评估

不同的输入模型会导致：
- 📊 不同的预期收益
- ⚠️ 不同的风险评估
- 🎯 不同的成功概率
- 📈 不同的策略排名

---

### 输入建模操作指南

#### 方式一：BACKTEST中自动完成（推荐）

```
1️⃣ 在BACKTEST MODE中上传历史数据
2️⃣ 运行回测
3️⃣ 系统自动完成输入建模
4️⃣ 切换到PROJECTION时自动应用
```

**优势：**
- ✅ 完全自动化
- ✅ 与策略回测同步
- ✅ 参数自动保存

---

#### 方式二：独立输入建模

**入口：** 左侧边栏 → "📊 输入建模"

**步骤：**

**1. 上传数据**
```
- 点击"上传CSV"按钮
- 选择历史价格数据文件
- 系统自动解析
```

**2. 数据预览**
```
- 查看数据摘要
- 确认日期范围
- 确认资产列表
```

**3. 自动拟合**
```
- 系统自动拟合10种分布
- 计算拟合优度指标
- 显示拟合结果
```

**4. 查看结果**
```
- 查看推荐分布
- 对比不同分布的拟合效果
- 查看拟合参数
```

**5. 分布切换**
```
- 在成功拟合的分布中切换
- 查看每个分布的详细参数
- 查看拟合优度指标
- 查看可视化对比
```

**6. 选择分布**
```
- 选择最适合的分布
- 可以选择推荐分布
- 也可以根据需要选择其他分布
```

**7. 保存配置**
```
- 点击"✅ 保存配置"按钮
- 保存选择的分布类型和参数
- 在PROJECTION模式中自动使用
```

---

### 输入建模结果解读

#### 结果展示

```
📊 输入建模完成

推荐分布：Bootstrap（经验分布）

数据特征：
- 数据点数：756（约3年）
- 日均收益：0.048%
- 年化收益：12.1%
- 日标准差：1.18%
- 年化波动：18.7%
- 偏度：-0.28（轻微左偏）
- 峰度：4.15（轻微尖峰）

拟合结果：
1. Bootstrap（推荐）
   - 说明：完全基于历史数据，非参数方法
   - 优势：保留所有分布特征
   
2. Student-t
   - KS：0.042
   - 自由度：6. 2（厚尾特征）
   - 适合：考虑极端事件
   
3. Normal
   - KS：0.068
   - 均值：0.048%
   - 标准差：1.18%

💡 建议：使用Bootstrap分布，它完全基于历史数据，
能够保留偏态、厚尾等所有特征，提供最准确的预测。
```

---

#### 关键信息解读

**数据量评估：**
- <252天（1年）：数据较少，结果可靠性一般
- 252-756天（1-3年）：数据充足，结果可靠
- >756天（3年+）：数据丰富，结果很可靠

**分布特征：**
- **负偏度**：下跌风险大于上涨机会（需关注）
- **高峰度**：极端事件较多（需考虑Student-t）
- **高波动**：风险较大（需谨慎设定目标）

**分布选择：**
- **推荐优先级**：Bootstrap > Student-t > Normal
- **快速测试**：可选Normal
- **保守估计**：建议Student-t
- **最准确**：使用Bootstrap

---

## 三种分布模型详解

### 对比总览

| 特性 | Normal | Student-t | Bootstrap |
|-----|--------|-----------|-----------|
| **复杂度** | 简单 | 中等 | 最复杂 |
| **参数数量** | 2个（μ, σ） | 3个（μ, σ, df） | 0个（非参数） |
| **数据要求** | 少（50+点） | 中等（100+点） | 多（252+点） |
| **计算速度** | 最快 | 快 | 较慢 |
| **极端事件** | 低估 | 较准确 | 最准确 |
| **分布特征** | 正态，薄尾 | 可调厚尾 | 完全保留 |
| **适用场景** | 稳定市场 | 波动市场 | 所有情况 |
| **推荐度** | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |

---

### 1. Normal（正态分布）

#### 基本特点

**数学形式：**
```
f(x) = (1 / (σ√2π)) · e^(-(x-μ)²/(2σ²))
```

**参数：**
- μ（mu）：均值，分布的中心位置
- σ（sigma）：标准差，分布的离散程度

**形状特征：**
- 📊 对称的钟形曲线
- 📈 68%数据在μ±σ范围内
- 📉 95%数据在μ±2σ范围内
- 📐 99. 7%数据在μ±3σ范围内

---

#### 适用场景

**✅ 适合使用的情况：**
- 市场波动相对稳定
- 需要快速得到初步预测
- 数据量较少（<252点）
- 历史数据接近正态分布
- 快速测试和原型验证

**⚠️ 不适合的情况：**
- 市场波动剧烈
- 历史存在多次极端事件
- 数据呈现明显偏态或厚尾
- 需要保守的风险估计

---

#### 参数详解

##### 均值（Mean, μ）

**含义：** 预期日收益率

**如何获取：**
```python
日均收益率 = sum(每日收益率) / 数据点数
年化收益率 = 日均收益率 × 252
```

**示例：**
```
历史数据：500天
日均收益：0.05%
年化收益：0.05% × 252 = 12.6%
```

**设置建议：**
- 📊 **自动拟合（推荐）**：使用历史数据计算
- 📈 **乐观预期**：增加10-20%
- 📉 **保守预期**：减少10-20%
- ⚠️ **不建议**：完全凭主观设定

---

##### 波动率（Volatility, σ）

**含义：** 收益率的标准差，衡量风险

**如何获取：**
```python
日标准差 = sqrt(sum((收益率 - 均值)²) / (n-1))
年化波动率 = 日标准差 × sqrt(252)
```

**示例：**
```
历史数据：500天
日标准差：1.2%
年化波动：1.2% × √252 = 19.0%
```

**解读：**
- <10%：低波动（债券类）
- 10%-20%：中等波动（混合类）
- 20%-30%：较高波动（股票类）
- >30%：高波动（高风险资产）

---

#### 局限性

**1. 低估极端事件（Underestimate Tail Risk）**

正态分布假设：
```
超过3σ的事件概率：0.27%（每370天一次）
实际市场：2-3个月就可能出现一次
```

**影响：**
- VaR/CVaR被低估
- "黑天鹅"事件概率被低估
- 风险管理可能不足

---

**2. 假设对称性（Symmetry Assumption）**

正态分布：
```
上涨3%和下跌3%的概率相同
```

实际市场：
```
通常呈现负偏态（下跌风险大于上涨机会）
```

**影响：**
- 下行风险被低估
- 不适合偏态明显的资产

---

**3. 忽略峰度（Ignore Kurtosis）**

正态分布：
```
峰度 = 3（固定值）
```

实际市场：
```
峰度通常 > 3（尖峰特征，极端值更多）
```

**影响：**
- 中间区域概率被高估
- 极端区域概率被低估

---

#### 使用建议

**推荐使用：**
```
✅ 快速测试和初步评估
✅ 数据量少于1年
✅ 市场相对稳定时期
✅ 计算效率优先时
```

**不推荐使用：**
```
⚠️ 高风险资产
⚠️ 波动剧烈的市场
⚠️ 需要精确风险评估时
⚠️ 历史呈现明显偏态或厚尾
```

**改进方法：**
```
📈 如果历史数据充足（>1年），使用Bootstrap
⚠️ 如果关注极端风险，使用Student-t
📊 如果必须使用Normal，增加安全边际（提高波动率10-20%）
```

---

### 2. Student-t（t分布）

#### 基本特点

**数学形式：**
```
f(x) = Γ((df+1)/2) / (Γ(df/2)·√(df·π)·σ) · (1 + ((x-μ)²)/(df·σ²))^(-(df+1)/2)
```

**参数：**
- μ（mu）：位置参数（类似均值）
- σ（sigma）：尺度参数（类似标准差）
- df（degrees of freedom）：自由度，控制尾部厚度

**形状特征：**
- 📊 钟形曲线，但尾部更厚
- 📈 df越小，尾部越厚
- 📉 df→∞时，趋近于正态分布
- ⚠️ 更高的极端事件概率

---

#### 核心优势：厚尾特征

**与正态分布的对比：**

| 概率事件 | Normal | Student-t (df=5) |
|---------|--------|------------------|
| 超过2σ | 4.6% | 6.9% |
| 超过3σ | 0.27% | 1.2% |
| 超过4σ | 0.006% | 0.12% |
| 超过5σ | 0.00006% | 0.015% |

**含义：**
- Student-t对极端事件的预测更符合实际市场
- "5σ事件"在正态分布中几乎不可能，但在t分布中有合理概率
- 更适合捕捉金融市场的"黑天鹅"事件

---

#### 参数详解

##### 均值（Mean, μ）

**含义：** 与正态分布类似，表示中心位置

**设置：** 与Normal的均值设置相同
```
日均收益率 → 年化收益率 × 252
```

---

##### 尺度（Scale, σ）

**含义：** 类似标准差，但不完全相同

**关系：**
```
实际标准差 = σ × sqrt(df / (df - 2))  （当df > 2）
```

**示例：**
```
如果历史年化波动率 = 20%
df = 5
则尺度参数 σ = 20% × sqrt((5-2)/5) = 15. 5%
```

---

##### 自由度（Degrees of Freedom, df）

**核心参数：** 控制尾部厚度

**值的含义：**
- **df = 1**：Cauchy分布，极厚尾，无有限方差
- **df = 2-4**：非常厚尾，极端事件频繁
- **df = 5-10**：厚尾，适合大多数金融资产
- **df = 20-30**：轻微厚尾
- **df → ∞**：趋近正态分布

**典型值：**

| 资产类型 | 推荐df | 原因 |
|---------|-------|------|
| 高波动股票 | 4-6 | 极端事件多 |
| 大盘股票 | 6-10 | 波动较大 |
| 混合资产 | 10-15 | 中等波动 |
| 债券 | 15-30 | 波动较小 |

---

#### 适用场景

**✅ 适合使用的情况：**
- 市场波动较大
- 历史存在多次极端事件
- 需要保守的风险估计
- 关注尾部风险（VaR/CVaR）
- 高风险资产（股票、商品等）
- 危机时期的预测

**✅ 特别推荐：**
- 压力测试
- 最坏情况分析
- 风险管理
- 监管资本计算

---

#### 与Normal的对比

**示例场景：** 年化波动率20%，预测1年后的VaR(95%)

| 分布 | VaR(95%) | 解释 |
|-----|---------|------|
| Normal | -30% | 只有5%概率损失超过30% |
| Student-t (df=5) | -38% | 考虑厚尾，风险更大 |
| **差异** | **+8%** | **t分布给出更保守的估计** |

**实际影响：**
```
初始投资：$1,000,000
Normal预测：最坏损失 $300,000
Student-t预测：最坏损失 $380,000
差异：$80,000（风险准备金需求差异）
```

---

#### 可视化对比

系统会显示Normal vs Student-t的对比图：

**特征：**
- 📊 中心区域：两者接近
- 📈 尾部区域：t分布更厚
- ⚠️ 极端区域：t分布概率更高

**图表：**
```
            Normal (蓝色)
            Student-t (红色)
    
密度 |     /\
    |    /  \
    |   /    \
    |  /      \___
    | /           \___  ← 厚尾特征
    |/__________________\___
         收益率 →
         
注意：尾部区域Student-t更高，
表示极端事件概率更大
```

---

#### 使用建议

**推荐使用：**
```
✅ 高波动资产（股票、商品、加密货币）
✅ 需要保守风险估计
✅ 压力测试和最坏情况分析
✅ 历史呈现厚尾特征
✅ 监管和合规要求
```

**参数设置建议：**
```
📊 自动拟合（推荐）：使用历史数据拟合df
📈 保守设置：df = 4-6（厚尾）
📉 适中设置：df = 8-10（标准）
⚠️ 不确定时：选择df = 5（经典值）
```

**注意事项：**
```
⚠️ df过小（<3）：可能过于保守，预测过于悲观
✅ df = 5-10：平衡，适合大多数情况
📊 df > 30：接近正态分布，失去厚尾优势
```

---

### 3. Bootstrap（自助法/经验分布）

#### 基本原理

**核心思想：** "历史会重演，但不以相同顺序"

**方法：**
```
1. 收集所有历史收益率数据
2. 在模拟每个时间步时，从历史数据中随机抽取（有放回）
3. 不假设任何分布形式
4. 完全保留历史数据的所有特征
```

**示例：**
```
历史收益率：[0.5%, -1. 2%, 0.8%, -0.3%, 1.5%, .. ., 0.2%]
共756个数据点（3年）

模拟第1天：随机抽取 → 0.8%
模拟第2天：随机抽取 → -1.2%
模拟第3天：随机抽取 → 0.5%
... 

每天都从这756个数据点中随机抽取（有放回）
```

---

#### 核心优势

**1. 完全基于历史数据**
```
✅ 不需要假设分布形式
✅ 自动保留偏态特征
✅ 自动保留厚尾特征
✅ 自动保留所有高阶矩
```

**2. 保留真实市场特征**

| 特征 | Normal | Student-t | Bootstrap |
|-----|--------|-----------|-----------|
| 偏态 | 不保留（强制=0） | 不保留 | ✅ 完全保留 |
| 峰度 | 不保留（强制=3） | 部分保留 | ✅ 完全保留 |
| 多峰 | 不支持 | 不支持 | ✅ 完全保留 |
| 相关性结构 | 不支持 | 不支持 | ✅ 可保留 |
| 序列相关 | 不支持 | 不支持 | ✅ 可保留 |

**3. 最真实的模拟**
```
✅ 如果历史上出现过5%的单日暴跌，Bootstrap会以相同概率模拟
✅ 如果历史上正收益多于负收益，Bootstrap会保留这个特征
✅ 如果历史上存在波动聚集，Bootstrap可以捕捉
```

---

#### 工作原理详解

##### 有放回随机抽样（Sampling with Replacement）

**过程：**
```
历史数据池：[r₁, r₂, r₃, ..., r₇₅₆]

第1次抽样：
- 随机选择 → r₂₃ = 1. 2%
- r₂₃仍然留在池中

第2次抽样：
- 随机选择 → r₅ = -0.8%
- 可能再次选中r₂₃（有放回）

第3次抽样：
- 随机选择 → r₂₃ = 1.2%（再次被选中）
- 这是允许的
```

**为什么要有放回？**
- 保持数据池的完整性
- 允许极端事件重复出现
- 生成足够多的模拟路径

---

##### 模拟路径生成

**单条路径示例：**
```
初始价格：$100
预测期：252天（1年）

Day 1: 抽取收益率 = 0.5%
       价格 = $100 × (1 + 0.005) = $100.50

Day 2: 抽取收益率 = -1.2%
       价格 = $100.50 × (1 - 0.012) = $99.29

Day 3: 抽取收益率 = 0.8%
       价格 = $99.29 × (1 + 0.008) = $100.08

... 

Day 252: 最终价格 = $115.23
```

**1000条路径：**
- 重复上述过程1000次
- 得到1000个不同的最终价格
- 形成概率分布

---

#### 适用场景

**✅ 强烈推荐的情况：**
- 有充足的历史数据（>1年，建议2-3年）
- 希望完全基于历史经验预测
- 市场特征复杂，难以用参数模型描述
- 追求最准确的风险评估
- 需要捕捉所有分布特征

**✅ 最适合的资产：**
- 有足够历史数据的资产
- 分布特征复杂的资产
- 偏态和厚尾明显的资产
- 波动聚集特征明显的资产

---

#### 数据要求

**最少数据量：**
```
⚠️ 最少：100个交易日（约5个月）
   - 仅供快速测试
   - 结果可靠性较低
```

**推荐数据量：**
```
✅ 推荐：252个交易日（1年）
   - 覆盖完整年度周期
   - 包含各种市场状态
   - 结果较可靠
```

**理想数据量：**
```
🌟 理想：756个交易日（3年）或更多
   - 覆盖多个市场周期
   - 包含牛市、熊市、震荡市
   - 结果很可靠
   - 可能包含极端事件
```

**数据量影响：**

| 数据量 | 可靠性 | 建议 |
|-------|-------|------|
| <126天（半年） | 很低 | ⚠️ 改用Normal或Student-t |
| 126-252天（半年-1年） | 一般 | 💡 可使用，但需谨慎 |
| 252-756天（1-3年） | 良好 | ✅ 推荐使用 |
| >756天（3年+） | 优秀 | 🌟 强烈推荐 |

---

#### 优势详解

**1. 无需分布假设**
```
Normal：假设收益率服从正态分布
Student-t：假设收益率服从t分布
Bootstrap：不做任何假设，数据说话
```

**2. 自动捕捉非对称性**

**示例：**
```
历史数据：
- 正收益天数：420天（56%）
- 负收益天数：336天（44%）
- 平均正收益：+0.8%
- 平均负收益：-0.9%

Normal会强制对称
Bootstrap会保留这个不对称特征
```

**3. 自动捕捉极端事件**

**示例：**
```
历史上发生过的极端事件：
- 2020年3月：单日暴跌12%
- 2020年4月：单日暴涨9%

Normal：会严重低估这些事件的概率
Bootstrap：会以历史频率包含这些事件
```

**4. 捕捉时间依赖性（可选）**

**波动聚集（Volatility Clustering）：**
```
市场特征：高波动后通常跟随高波动
           低波动后通常跟随低波动

如果使用Block Bootstrap（分块自助法）：
- 连续抽取数据块（如5天一块）
- 可以保留这种序列相关性
```

---

#### 局限性

**1. 假设未来会重复历史**

```
⚠️ 如果市场环境发生根本变化，Bootstrap可能不准确
例如：
- 央行政策变化
- 市场结构性改革
- 前所未有的危机
```

**解决方法：**
- 使用最近的数据（如最近2年）
- 定期更新数据
- 结合专家判断调整

---

**2. 无法预测历史未出现的情况**

```
⚠️ 如果未来出现历史上从未发生过的极端事件，Bootstrap无法预测
例如：
- 历史最大跌幅：-10%
- 如果未来发生-20%的暴跌，Bootstrap不会模拟到
```

**解决方法：**
- 使用包含危机时期的长期数据
- 结合压力测试
- 对极端情景进行额外分析

---

**3. 需要足够的历史数据**

```
⚠️ 数据不足时，Bootstrap的优势无法发挥
- <6个月：严重不足
- 6个月-1年：勉强可用
- >1年：较好
- >3年：理想
```

**解决方法：**
- 如果数据不足，改用Normal或Student-t
- 积累更多数据后再使用Bootstrap
- 考虑使用类似资产的数据

---

**4. 计算效率较低**

```
⚠️ Bootstrap需要在大量历史数据中随机抽样，速度较慢
- Normal：最快
- Student-t：快
- Bootstrap：较慢（但通常可接受）
```

**影响：**
- 模拟1000条路径，Bootstrap可能需要多几秒钟
- 通常不是问题，除非需要实时计算

---

#### 使用建议

**推荐使用：**
```
✅ 有1年以上历史数据
✅ 追求最准确的预测
✅ 资产分布特征复杂
✅ 风险管理和合规
✅ 重要决策
```

**数据准备：**
```
1. 确保数据质量
   - 无缺失值
   - 无异常值（除非确实发生过）
   - 日期连续

2. 选择合适的时间窗口
   - 太短：数据不足
   - 太长：可能包含不再相关的旧数据
   - 建议：2-3年

3. 定期更新
   - 建议每季度更新一次
   - 滚动窗口：始终保持最近2-3年的数据
```

---

#### 与参数模型的对比

**场景：** 预测股票投资组合，年化波动率20%

| 方面 | Normal | Student-t | Bootstrap |
|-----|--------|-----------|-----------|
| **VaR(95%)** | -30% | -38% | -35% |
| **CVaR(95%)** | -35% | -45% | -42% |
| **捕捉偏态** | ❌ | ❌ | ✅ |
| **捕捉厚尾** | ❌ | ✅ | ✅ |
| **捕捉多峰** | ❌ | ❌ | ✅ |
| **极端事件** | 低估 | 较准确 | 最准确 |
| **数据要求** | 低 | 中 | 高 |
| **计算速度** | 最快 | 快 | 较慢 |
| **准确性** | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |

---

#### 实际案例

**案例：2020年COVID-19市场崩盘**

**情景：** 2020年1月预测未来3个月的市场表现

**数据：** 使用2017-2019年的历史数据

| 分布 | 预测损失超过30%的概率 | 实际 |
|-----|---------------------|------|
| Normal | 0.1% | ❌ 实际发生了 |
| Student-t (df=5) | 1.5% | ⚠️ 低估但更接近 |
| Bootstrap | 3.2% | ✅ 因为包含2018年的10%回撤 |

**结论：**
- Bootstrap因为保留了历史极端事件，预测更准确
- 但即使Bootstrap也低估了（因为COVID-19是前所未有的）
- 这说明即使最好的模型也无法完美预测未来

**启示：**
- 使用包含危机时期的数据
- Bootstrap是最好的选择，但不是完美的
- 需要结合压力测试和情景分析

---

## 模拟参数配置

### 数据源设置

#### 数据来源优先级

系统按以下优先级使用数据：

```
1️⃣ 回测数据（最高优先级）
   - 如果已完成BACKTEST，自动使用回测中的历史数据
   - 确保输入模型与回测一致
   
2️⃣ 上传的CSV文件
   - 在PROJECTION中上传的历史数据
   - 用于独立的输入建模
   
3️⃣ 输入建模数据
   - 在"输入建模"功能中上传的数据
   - 与PROJECTION共享
   
4️⃣ 默认参数（最低优先级）
   - 如果没有任何历史数据
   - 使用系统默认参数（不推荐）
```

---

#### 上传历史数据（可选但推荐）

**功能入口：** "📂 Upload CSV for Input Modeling"

**CSV 文件格式：**
```csv
date,SPY,AGG,GLD
2020-01-01,320.5,115.2,1550.8
2020-01-02,322.1,115.5,1548.3
2020-01-03,318.9,115.8,1552.1
...
```

**格式要求：**

| 要求 | 说明 |
|-----|------|
| ✅ 第一列 | 必须是日期列（date/Date/DATE） |
| ✅ 日期格式 | YYYY-MM-DD 或其他标准格式 |
| ✅ 后续列 | 每列代表一个资产的价格 |
| ✅ 数据类型 | 价格必须是数值型 |
| ✅ 数据完整 | 无缺失值（或很少） |
| ✅ 数据连续 | 尽量按交易日连续 |

---

**数据量建议：**

| 数据量 | 交易日 | 评估 | 建议 |
|-------|-------|------|------|
| < 6个月 | <126天 | ⚠️ 不足 | 不推荐Bootstrap |
| 6个月-1年 | 126-252天 | 💡 勉强 | 谨慎使用Bootstrap |
| 1-3年 | 252-756天 | ✅ 良好 | 推荐Bootstrap |
| > 3年 | >756天 | 🌟 优秀 | 强烈推荐Bootstrap |

---

**数据质量检查：**

上传后，系统会自动检查并显示：

```
✅ 数据上传成功

数据摘要：
- 文件名：portfolio_prices. csv
- 日期范围：2020-01-01 至 2022-12-31
- 数据点数：756天（约3年）
- 资产列表：SPY, AGG, GLD（3个资产）
- 缺失值：0个
- 数据质量：优秀 ✅

建议：
- 数据量充足，推荐使用Bootstrap分布
- 覆盖了多个市场周期，可靠性高
```

---

**常见问题处理：**

**问题1：日期格式不正确**
```
❌ 错误：2020/01/01（使用斜杠）
✅ 正确：2020-01-01（使用短横线）

或使用Excel的标准日期格式
```

**问题2：包含文本数据**
```
❌ 错误：
date,SPY,AGG
2020-01-01,320.5,N/A

✅ 正确：
date,SPY,AGG
2020-01-01,320.5,115.2

或删除含N/A的行
```

**问题3：价格列包含逗号**
```
❌ 错误：1,234.56（千位分隔符）
✅ 正确：1234.56（无分隔符）
```

---

#### 使用回测数据（推荐）

**优势：**
```
✅ 完全自动化，无需手动上传
✅ 确保与回测使用相同数据
✅ 输入模型自动应用
✅ 策略参数自动同步
```

**操作：**
```
1️⃣ 在BACKTEST中上传数据并运行回测
2️⃣ 切换到PROJECTION模式
3️⃣ 系统自动应用回测数据和输入模型
4️⃣ 直接配置其他参数并运行模拟
```

**状态提示：**
```
✅ 已检测到回测数据：
- 数据期间：2020-01-01 至 2022-12-31
- 数据点数：756天
- 已完成输入建模：Bootstrap分布
- 策略：Momentum（自动应用）
```

---

### 模拟参数

#### 1.  Horizon (Years) - 预测年限

**参数范围：** 1 - 50 年

**含义：** 预测未来多少年的投资表现

**UI 显示：**
```
Horizon (Years): [滑块] 1 ----●---- 50
当前值：10年
```

---

**设置建议：**

##### 短期预测（1-3年）

**适用场景：**
- ✅ 短期投资规划
- ✅ 战术资产配置
- ✅ 短期财务目标
- ✅ 市场时机选择

**特点：**
- 不确定性较小
- 预测相对准确
- 更依赖近期市场状态

**示例目标：**
- 1年后买房首付
- 2年后子女教育费用
- 3年后旅游基金

---

##### 中期预测（5-10年）

**适用场景：**
- ✅ 中期财务目标
- ✅ 战略资产配置
- ✅ 子女教育规划
- ✅ 创业资金积累

**特点：**
- 平衡准确性和覆盖范围
- **推荐的预测期限**
- 适合大多数投资决策

**示例目标：**
- 5年后购房
- 7年后子女大学费用
- 10年后创业资金

---

##### 长期预测（15-30年）

**适用场景：**
- ✅ 退休规划
- ✅ 长期财富积累
- ✅ 代际财富传承
- ✅ 长期捐赠基金

**特点：**
- 不确定性较大
- 复利效应显著
- 需要考虑通胀影响

**示例目标：**
- 20年后退休
- 30年后财富传承
- 25年后子女婚嫁基金

---

##### 超长期预测（>30年）

**适用场景：**
- ✅ 年轻人的退休规划
- ✅ 机构投资者的长期负债匹配
- ✅ 主权基金、养老金

**特点：**
- 不确定性很大
- 预测准确性降低
- 更多依赖假设

**⚠️ 注意：**
- 预测结果仅供参考
- 需要考虑很多不确定因素
- 建议每3-5年重新评估

---

**时间期限对结果的影响：**

| 预测年限 | 不确定性 | 置信区间宽度 | 复利影响 |
|---------|---------|-------------|---------|
| 1年 | 低 | 窄 | 小 |
| 5年 | 中低 | 中等 | 中等 |
| 10年 | 中等 | 较宽 | 显著 |
| 20年 | 高 | 很宽 | 非常显著 |
| 30年+ | 很高 | 极宽 | 指数级 |

---

#### 2. Monte Carlo Trials - 模拟次数

**参数范围：** 100 - 5000 次

**含义：** 生成多少条模拟路径

**设置建议：**

| 模拟次数 | 用途 | 准确性 | 计算时间 |
|---------|------|--------|---------|
| 100-500 | 快速原型 | 较低 | <1秒 |
| 500-1000 | 快速测试 | 一般 | 1-2秒 |
| 1000-2000 | 标准分析（推荐） | 良好 | 2-5秒 |
| 2000-3000 | 精确分析 | 很好 | 5-10秒 |
| 3000-5000 | 最精确 | 优秀 | 10-20秒 |

**影响：**
- ✅ 次数越多，结果越稳定
- ✅ 置信区间越准确
- ⚠️ 但计算时间也越长

---

#### 3. Annual Contribution - 年度追加投资

**参数范围：** $0 - $1,000,000

**含义：** 每年年初追加的投资金额

**设置建议：**

| 金额 | 场景 | 说明 |
|-----|------|------|
| $0 | 一次性投资 | 只评估初始投资 |
| $5,000-$12,000 | 小额定投 | 年收入5-10% |
| $12,000-$50,000 | 中额定投 | 典型定投金额 |
| $50,000+ | 大额定投 | 高收入人群 |

**实际应用：**
- 模拟定投策略的长期效果
- 评估持续投资的复利效应
- 制定储蓄和投资计划

---

#### 4. Return Dist - 收益分布模型

**选项：** Normal / Student-t / Bootstrap

**选择指南：**

```
✅ 已完成输入建模
   → 使用系统推荐的分布（自动应用）

✅ 有充足历史数据（>1年）
   → Bootstrap（最真实、最准确）

💡 快速测试
   → Normal（最简单、最快）

⚠️ 保守风险估计
   → Student-t（考虑极端事件）
```

**系统提示：**

如果已完成输入建模：
```
✅ 已应用回测结果：
- Input Model：Bootstrap 分布
- 基于：756天历史数据
- 用途：模拟未来价格走向
```

如果选择与输入建模不一致：
```
⚠️ 分布不一致警告：
- 当前选择：Normal
- 推荐使用：Bootstrap
- 建议：使用输入建模推荐的分布
```

---

## 结果分析

### 预测结果概览（3个核心指标）

#### 1. Expected Outcome（预期结果）

**含义：** 中位数（50%分位数）

**解读：**
- 50%概率达到或超过此值
- 最可能的结果
- 比均值更稳健

#### 2. Worst Case (95% VaR)

**含义：** 5%分位数，最坏情况

**解读：**
- 95%情况下不会低于此值
- 用于风险管理
- 设定风险限额的参考

#### 3. Success Prob（成功概率）

**含义：** 超过投入资金的概率

**解读：**
- >90%：非常可能成功
- 70%-90%：较可能成功
- 50%-70%：成功概率一般
- <50%：成功概率较低

---

### 详细图表分析（6个标签页）

#### 标签页 1：Path Simulation（路径模拟）

**展示内容：**
- 扇形图：置信区间
- 中位数路径
- 50%和90%置信区间

**解读：**
- 扇形越宽 → 不确定性越大
- 向上倾斜 → 预期增长
- 中位数 → 最可能路径

---

#### 标签页 2：Distribution Analysis（分布分析）

**展示内容：**
- 最终价值直方图
- 统计指标
- 分位数

**关键指标：**
- Mean、Median、Std Dev
- Skewness、Kurtosis
- Success Prob、2x Prob

---

#### 标签页 3：Probability Analysis（概率分析）

**展示内容：**
- 累积分布函数（CDF）
- 目标达成概率

**目标类型：**
- 保本（90%、100%）
- 盈亏平衡
- 倍数目标（1.5x、2x、3x）

---

#### 标签页 4：Scenario Analysis（情景分析）

**展示内容：**
- 5个分位数路径
- 悲观/中性/乐观情景

**分位数：**
- 5%：悲观
- 25%：较悲观
- 50%：中性
- 75%：较乐观
- 95%：乐观

---

#### 标签页 5：Risk Metrics（风险指标）

**关键指标：**

**VaR (Value at Risk)：**
- VaR(95%)：95%置信度最大损失
- VaR(99%)：99%置信度最大损失

**CVaR (Conditional VaR)：**
- CVaR(95%)：超过VaR时的平均损失

**其他指标：**
- Max Loss、Downside Std
- Loss Prob、Tail Risk

---

#### 标签页 6：Export（导出）

**导出内容：**
- 完整流程报告（Markdown）
- 包含回测和预测两阶段
- 策略评估和建议

---

## 模拟流程说明

### 工作流程

#### 1. 📊 输入建模阶段
- 分析历史数据
- 拟合分布模型
- 保存参数

#### 2. 🚀 价格模拟阶段
- 从分布中抽取收益率
- 更新价格：`新价格 = 旧价格 × (1 + 收益率)`
- 生成N条路径

#### 3. 📈 策略评估阶段
- 应用投资策略
- 计算组合价值
- 统计分析结果

---

## 高级功能

### 输入建模状态检测

**已完成：**
```
✅ 已应用回测结果
- 策略：Momentum
- Input Model：Bootstrap
```

**未完成：**
```
⚠️ 未检测到输入建模结果
- 建议先运行回测
- 或完成独立输入建模
```

### 自动应用回测策略

系统自动同步回测中的策略和参数。

### 分布一致性检查

如果分布不一致，系统会警告并建议使用推荐分布。

---

## 常见问题

### Q1: 必须先完成BACKTEST吗？
**A:** 不是必须，但强烈建议。先回测可获得准确的输入模型。

### Q2: 如果没有历史数据怎么办？
**A:** 可使用默认参数，但准确性较低。建议至少上传一些历史数据。

### Q3: 应该选择哪种分布模型？
**A:** 
- 已完成输入建模：使用推荐分布
- 有充足数据：Bootstrap
- 快速测试：Normal
- 保守估计：Student-t

### Q4: 模拟次数设置多少？
**A:** 1000-2000次（推荐），平衡准确性和速度。

### Q5: 预测年限设置多少？
**A:** 5-10年（推荐），适合大多数投资决策。

### Q6: 如何解读成功概率？
**A:**
- >90%：可制定积极目标
- 70%-90%：目标合理
- 50%-70%：需谨慎
- <50%：建议调整策略

### Q7: VaR和CVaR有什么区别？
**A:**
- VaR：最坏情况损失
- CVaR：超过VaR时的平均损失

### Q8: 为什么预测与回测差异大？
**A:** 回测基于已知历史，预测处理未来不确定性。这是正常的。

### Q9: 如何制定投资计划？
**A:**
1. 查看中位数路径
2. 评估VaR（最坏情况）
3. 检查目标达成概率
4. 制定不同情景应对策略

### Q10: 预测结果可靠吗？
**A:** 基于历史和概率，有参考价值，但历史不能完全预测未来。建议定期更新。

### Q11: 如何提高预测准确性？
**A:**
- 使用充足历史数据（>1年）
- 选择Bootstrap分布
- 增加模拟次数
- 定期更新数据

### Q12: 年度追加投资如何设置？
**A:** 根据实际储蓄能力，一般为年收入的10-30%。

---

## 总结

### PROJECTION MODE 核心价值

✅ **完整工作流程**：从回测到预测的闭环分析  
✅ **基于输入建模**：使用历史数据拟合的分布模型  
✅ **蒙特卡洛模拟**：生成数千条路径，全面评估  
✅ **概率预测**：提供分布而非单一答案  
✅ **风险量化**：VaR、CVaR等专业指标  
✅ **6个详细图表**：从路径到风险的全方位分析  
✅ **完整报告**：记录完整的分析过程

### 通过预测分析，你可以：

- 📊 评估策略未来可能表现
- 🎯 设定合理投资目标
- ⚠️ 量化和管理风险
- 🚀 制定不同情景应对策略
- 💡 做出更明智的投资决策

### 最佳实践建议

**1. 数据准备**
- 收集至少1年历史数据
- 确保数据质量和完整性
- 定期更新（建议每季度）

**2. 输入建模**
- 优先使用Bootstrap（数据充足时）
- 验证拟合效果
- 理解分布特征

**3. 参数设置**
- 预测年限：5-10年（推荐）
- 模拟次数：1000-2000次
- 年度追加：根据实际能力

**4. 结果分析**
- 重点关注中位数和VaR
- 评估成功概率是否合理
- 准备应对最坏情况

**5. 持续改进**
- 定期更新数据和重新预测
- 对比预测与实际表现
- 调整策略和参数

### 风险提示

⚠️ **预测局限性**
- 基于历史，不保证未来
- 无法预测黑天鹅事件
- 市场环境可能改变

⚠️ **使用建议**
- 作为参考，非绝对依据
- 结合其他分析方法
- 保持合理预期
- 定期重新评估

### 学习路径

**初级用户：**
- ✅ 完成BACKTEST和输入建模
- ✅ 使用推荐参数运行模拟
- ✅ 理解核心指标

**中级用户：**
- ✅ 尝试不同分布模型
- ✅ 调整预测参数
- ✅ 深入分析6个图表

**高级用户：**
- ✅ 对比多个策略
- ✅ 进行情景分析
- ✅ 结合压力测试
- ✅ 制定完整投资计划

---

## 附录

### 术语表

| 术语 | 英文 | 说明 |
|-----|------|------|
| 蒙特卡洛 | Monte Carlo | 基于概率的模拟方法 |
| 输入建模 | Input Modeling | 提取分布特征建模 |
| VaR | Value at Risk | 风险价值 |
| CVaR | Conditional VaR | 条件风险价值 |
| 中位数 | Median | 50%分位数 |
| 置信区间 | Confidence Interval | 结果可能范围 |
| Bootstrap | Bootstrap | 自助法/经验分布 |

### 公式参考

**年化转换：**
```
年化收益 = 日收益 × 252
年化波动 = 日波动 × √252
```

**VaR计算：**
```
VaR(95%) = 第5百分位数的损失
```

**CVaR计算：**
```
CVaR(95%) = 超过VaR(95%)的平均损失
```

### 快捷操作

**完整流程（推荐）：**
```
BACKTEST → 输入建模 → PROJECTION → 分析结果
```

**快速流程：**
```
使用示例数据 → BACKTEST → PROJECTION
```

### 技术支持

如有问题或建议，请联系：
- 📧 Email: support@example.com
- 💬 在线客服: [链接]
- 📖 帮助文档: [链接]

---

**祝你投资顺利！** 🎉

*通过科学的预测分析，做出更明智的投资决策*
